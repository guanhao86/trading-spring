#@html()
    #@wrapper()
        #@panel()
            #@panelHeader({"title":"奖金记录 搜索", "perm": "", "isBack": false, "href": ""})
                #btn({"btnName":"查询", "icon":"fa-search", "style":"primary",  "attr":{"data-button": "search", "data-form-id": "search"}})
                #btn({"btnName":"清空", "icon":"fa-trash-o", "style":"danger",  "attr":{"empty": "true", "reset-id": "reset_form"}})
            #end
            #@panelBody()
                #@form("search" false "post" "manage/bonus/listEveryDay")
                    #@divColSmNum(3)
                        #formInput({"name": "会员ID", "length": "4,8", "asterisk": false} {"name": "memberId", "id": "memberId",
                            "value": "$!{queryVO.memberId}"})
                    #end
                    #@divColSmNum(3)
                        #formDate({"name": "开始日期", "length": "4,8", "asterisk": false, "cl": "start-time"} {"name":
                            "start", "id": "start","dateVal": "true", "value":
                            "$!{queryVO.start}"})
                    #end
                    #@divColSmNum(3)
                        #formDate({"name": "结束日期", "length": "4,8", "asterisk": false, "cl": "end-time"} {"name":
                            "end", "id": "end","dateVal": "true", "value":
                            "$!{queryVO.end}"})
                    #end
                #end

            #end
            #@panel()
                #@panelBody()
                    #@table()
                        #tableTHead(["时间", "会员编号", "会员姓名","会员级别","奖衔级别","直推奖","管理奖","伯乐奖","复消奖","奖衔奖","平台管理费","福利积分","金蛋","总奖金"],"", false)
                        #@tableBody($page.list)
                            #set($bonus1 = 0)
                            #set($bonus2 = 0)
                            #set($bonus3 = 0)
                            #set($bonus4 = 0)
                            #set($bonus5 = 0)
                            #set($bonus6 = 0)
                            #set($bonus7 = 0)
                            #set($bonus10 = 0)
                            #if ($!{l.bonus1} != "")
                                #set($bonus1 = $!{l.bonus1})
                            #end
                            #if ($!{l.bonus2} != "")
                                #set($bonus2 = $!{l.bonus2})
                            #end
                            #if ($!{l.bonus3} != "")
                                #set($bonus3 = $!{l.bonus3})
                            #end
                            #if ($!{l.bonus4} != "")
                                #set($bonus4 = $!{l.bonus4})
                            #end
                            #if ($!{l.bonus5} != "")
                                #set($bonus5 = $!{l.bonus5})
                            #end
                            #if ($!{l.bonus6} != "")
                                #set($bonus6 = $!{l.bonus6})
                            #end
                            #if ($!{l.bonus7} != "")
                                #set($bonus7 = $!{l.bonus7})
                            #end
                            #if ($!{l.bonus10} != "")
                                #set($bonus10 = $!{l.bonus10})
                            #end
                            #set($total = $!{bonus1} + $!{bonus2} + $!{bonus3} + $!{bonus4} + $!{bonus5} + $!{bonus6})

                            #tableTd($!DateTool.format("yyyy-MM-dd", $!{l.recodeTime}))
                            #tableTd("$!{l.tableMember.memberId}")
                            #tableTd("$!{l.tableMember.reallyName}")
                            #tableTd("$!{l.tableMember.level}", {"type": "dict", "format": "level"})
                            #tableTd("$!{l.tableMember.mRank}", {"type": "dict", "format": "mRank"})
                            #tableTd("$!{l.bonus1}")
                            #tableTd("$!{l.bonus2}")
                            #tableTd("$!{l.bonus3}")
                            #tableTd("$!{l.bonus4}")
                            #tableTd("$!{l.bonus5}")
                            #tableTd("$!{l.bonus6}")
                            #tableTd("$!{l.bonus10}")
                            #tableTd("$!{l.bonus7}")
                            #tableTd("$!{total}")
                            #@tableTd()
                                #@a("查看" {"href": "$!{ctx}/manage/bonus/listIndex?memberId=$!{l.tableMember.memberId}", "class": "fa fa-pencil-square-o"})#end
                            #end
                        #end
                    #end

                    #parse("modular/page.vm")
                #end
            #end
        #end
    #end


    #@script()
    <script>
        show(1)
        function show(v){
            bonusId = v;
            console.log("Start",$("#start").val())
            if ("" == window.document.getElementById("myFrame"+v).name) {
                window.document.getElementById("myFrame" + v).src =
                        "/admin/manage/bonus/list?memberId=" + $("#memberId").val() + "&bonusId=" + bonusId +
                                "&start="+$("#start").val()+"&end="+$("[name='end']").val()
                window.document.getElementById("myFrame"+v).name = "myFrame"+v;
            }
        }

        $(function () {
            $("#review_id").on('click', function () {
                var arr = "";
                $("[pId='all']:checked").each(function () {
                    if (arr == ""){
                        arr = $(this).val();
                    } else {
                        arr += "," + $(this).val();
                    }
                })
                alert(arr)
                window.location.href = "$!{ctx}/member/delete?id=" + arr;
            })

        })

        $(function () {
            var startTime = $('.start-time').datepicker().on('changeDate', function(ev) {
                startTime.hide();
            }).data('datepicker');
            var endTime = $('.end-time').datepicker().on('changeDate', function(ev) {
                endTime.hide();
            }).data('datepicker');

            $('button[empty="true"]').on('click', function () {
                $("input[name='start']").eq(0).val($('#s_t_h').val());
                $("input[name='end']").eq(0).val($('#e_t_h').val());
            })
        })

        /*$.validator.setDefaults({
            submitHandler: function(form) {
                if($('#start_time').val()!=""&&$('#end_time').val()!=""){
                    if (!(new Date($('#start_time').val()).compare(new Date($('#end_time').val()), DATE_CONS.DATE_COMPARE_SMALL_EQUAL))){
                        $("#goods_prompt").html(promptInfo.prompt("结束日期不能小于开始日期"));
                        shade.hideBg("dialog");
                        return;
                    }
                }
                form.submit();
            }
        });*/
        $(document).ready(function () {
            debugger;
            $("#search").validate({
                errorPlacement: function(error, element) {
                    debugger;
                    if (element.is(":checkbox")||element.is(":radio")||element.is(".date-time")){
                        debugger;
                        error.appendTo(element.parent().parent().parent());
                    } else {
                        debugger;
                        error.insertAfter(element.parent());
                    }
                },
                onfocus: true
            });
        })
    </script>
        #jsCalculate()
        #@jsValidate("form_insert")

        #end
    #end
#end